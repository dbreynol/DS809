<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Set 2 | Artifex - Fall 2023</title>
  <meta name="description" content="(Partial) course materials for Artifex, Spring 2023." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Set 2 | Artifex - Fall 2023" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="(Partial) course materials for Artifex, Spring 2023." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Set 2 | Artifex - Fall 2023" />
  
  <meta name="twitter:description" content="(Partial) course materials for Artifex, Spring 2023." />
  

<meta name="author" content="David Reynolds" />


<meta name="date" content="2023-12-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="set-1.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Artifex Fall 2023</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Topics in Time Series</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#autocorrelation"><i class="fa fa-check"></i><b>1.1</b> Autocorrelation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#assignment-3"><i class="fa fa-check"></i><b>1.2</b> Assignment 3</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#change-points"><i class="fa fa-check"></i><b>1.3</b> Change Points</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#cusum"><i class="fa fa-check"></i><b>1.3.1</b> CUSUM</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#assignment-4"><i class="fa fa-check"></i><b>1.4</b> Assignment 4</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#moving-average"><i class="fa fa-check"></i><b>1.5</b> Moving Average</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#assignment-5"><i class="fa fa-check"></i><b>1.6</b> Assignment 5</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html"><i class="fa fa-check"></i><b>2</b> Linear Regression Revisited</a>
<ul>
<li class="chapter" data-level="2.1" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html#estimation"><i class="fa fa-check"></i><b>2.1</b> Estimation</a></li>
<li class="chapter" data-level="2.2" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html#example"><i class="fa fa-check"></i><b>2.2</b> Example</a></li>
<li class="chapter" data-level="2.3" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html#assignment-2"><i class="fa fa-check"></i><b>2.3</b> Assignment 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="kayak-data-analysis.html"><a href="kayak-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Kayak Data Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="kayak-data-analysis.html"><a href="kayak-data-analysis.html#prompt"><i class="fa fa-check"></i><b>3.1</b> Prompt</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="set-1.html"><a href="set-1.html"><i class="fa fa-check"></i><b>4</b> Set 1</a>
<ul>
<li class="chapter" data-level="4.1" data-path="set-1.html"><a href="set-1.html#time-series-data"><i class="fa fa-check"></i><b>4.1</b> Time Series Data</a></li>
<li class="chapter" data-level="4.2" data-path="set-1.html"><a href="set-1.html#time-series-eda"><i class="fa fa-check"></i><b>4.2</b> Time Series EDA</a></li>
<li class="chapter" data-level="4.3" data-path="set-1.html"><a href="set-1.html#multiple-time-series"><i class="fa fa-check"></i><b>4.3</b> Multiple Time Series</a></li>
<li class="chapter" data-level="4.4" data-path="set-1.html"><a href="set-1.html#autocorrelation-1"><i class="fa fa-check"></i><b>4.4</b> Autocorrelation</a></li>
<li class="chapter" data-level="4.5" data-path="set-1.html"><a href="set-1.html#lab-1"><i class="fa fa-check"></i><b>4.5</b> Lab 1</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="set-2.html"><a href="set-2.html"><i class="fa fa-check"></i><b>5</b> Set 2</a>
<ul>
<li class="chapter" data-level="5.1" data-path="set-2.html"><a href="set-2.html#exponential-smoothing"><i class="fa fa-check"></i><b>5.1</b> Exponential Smoothing</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="set-2.html"><a href="set-2.html#optimization"><i class="fa fa-check"></i><b>5.1.1</b> Optimization</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="set-2.html"><a href="set-2.html#decomposition"><i class="fa fa-check"></i><b>5.2</b> Decomposition</a></li>
<li class="chapter" data-level="5.3" data-path="set-2.html"><a href="set-2.html#autoregressive-models"><i class="fa fa-check"></i><b>5.3</b> Autoregressive Models</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="set-2.html"><a href="set-2.html#stationarity"><i class="fa fa-check"></i><b>5.3.1</b> Stationarity</a></li>
<li class="chapter" data-level="5.3.2" data-path="set-2.html"><a href="set-2.html#acf-function"><i class="fa fa-check"></i><b>5.3.2</b> ACF Function</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="set-2.html"><a href="set-2.html#lab-2"><i class="fa fa-check"></i><b>5.4</b> Lab 2</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Artifex - Fall 2023</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="set-2" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Set 2<a href="set-2.html#set-2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="exponential-smoothing" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Exponential Smoothing<a href="set-2.html#exponential-smoothing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An alternate way to smooth a time series is with exponential smoothing. Like the moving average, this method averages over recent observations but differs in that it assigns relatively more weight to observations that are relatively closer. This idea can be expressed as,</p>
<p><span class="math display">\[\begin{align}
\hat{y}_{t+1 | t} = \alpha y_t + (1-\alpha) \hat{y}_{t | t-1},
\end{align}\]</span></p>
<p>where <span class="math inline">\(\hat{y}_{t+1 | t}\)</span> can be interpreted as the smoothed value of <span class="math inline">\(y_{t+1}\)</span> given data up to time <span class="math inline">\(t\)</span>. So, for the first few smoothed values, we have:</p>
<p><span class="math display">\[\begin{align}
\hat{y}_{1|0} &amp;= l_0 \\
\hat{y}_{2|1} &amp;= \alpha y_1 + (1-\alpha) l_0 \\
\hat{y}_{3|2} &amp;= \alpha y_2 + (1-\alpha) \hat{y}_{2|1} \\
&amp;= \alpha y_2 + (1-\alpha) \alpha y_1 + (1-\alpha)^2 l_0
\end{align}\]</span></p>
<p>Since we don’t have data prior to <span class="math inline">\(y_1\)</span>, we denote <span class="math inline">\(\hat{y}_{1 | 0} = l_0\)</span>. Therefore, this model depends on two parameters, <span class="math inline">\((l_0, \alpha)\)</span>. If we continue with the sequence above, each predicted value <span class="math inline">\(\hat{y_t}\)</span> can be expressed,</p>
<p><span class="math display">\[\begin{align}
\hat{y}_{t+1 | t} = (1-\alpha) ^ t l_0  + \sum_{j=0}^{t-1} \alpha (1-\alpha) ^ j y_{t-j}. \\
\end{align}\]</span></p>
<p>Let’s take a look at how this method depends on the parameters.</p>
<p><img src="series_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>For any <span class="math inline">\(\alpha\)</span> between 0 and 1, the weights attached to the observations decrease exponentially as we go back in time, hence the name “exponential smoothing”. If <span class="math inline">\(\alpha\)</span> is small (i.e., close to 0), more weight is given to observations from the more distant past. If <span class="math inline">\(\alpha\)</span> is large (i.e., close to 1), more weight is given to the more recent observations.</p>
<div id="optimization" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Optimization<a href="set-2.html#optimization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <span class="math inline">\((\alpha, l_0)\)</span> parameters can be estimated by minimizing the SSE:</p>
<p><span class="math display">\[\begin{align}
\text{SSE} = \sum_{i=i}^T \bigg(y_t - \hat{y}_{t | t-1}   \bigg)^2.
\end{align}\]</span></p>
<p>This is a non-linear optimization problem that you will solve in Lab 2!</p>
</div>
</div>
<div id="decomposition" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Decomposition<a href="set-2.html#decomposition" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="set-2.html#cb13-1" tabindex="-1"></a><span class="co"># us_employment data frame from the &#39;fpp3&#39; package</span></span>
<span id="cb13-2"><a href="set-2.html#cb13-2" tabindex="-1"></a>us_employment<span class="sc">$</span>date <span class="ot">=</span> <span class="fu">mdy</span> ( <span class="fu">str_c</span>( <span class="fu">month</span>(us_employment<span class="sc">$</span>Month), <span class="st">&quot;-1-&quot;</span>, <span class="fu">year</span>(us_employment<span class="sc">$</span>Month)) )</span>
<span id="cb13-3"><a href="set-2.html#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="set-2.html#cb13-4" tabindex="-1"></a>retail <span class="ot">=</span> us_employment <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="set-2.html#cb13-5" tabindex="-1"></a>  <span class="fu">filter</span>(Title <span class="sc">==</span> <span class="st">&quot;Retail Trade&quot;</span>, <span class="fu">year</span>(date) <span class="sc">&gt;</span> <span class="dv">2002</span>)</span></code></pre></div>
<p><img src="series_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p><img src="series_files/figure-html/unnamed-chunk-29-1.png" width="672" /><img src="series_files/figure-html/unnamed-chunk-29-2.png" width="672" /></p>
</div>
<div id="autoregressive-models" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Autoregressive Models<a href="set-2.html#autoregressive-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="stationarity" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Stationarity<a href="set-2.html#stationarity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="acf-function" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> ACF Function<a href="set-2.html#acf-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="lab-2" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Lab 2<a href="set-2.html#lab-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Change the <code>es</code> function in <a href="set-2.html#exponential-smoothing">Exponential Smoothing</a> to return the SSE, rather than <code>yt</code>, the smoothed time series.Now, use the <code>optim</code> function to find the values of <span class="math inline">\((\alpha, l_0)\)</span> that minimize SSE. Plot the exponentially smoothed time series using the optimized <span class="math inline">\((\alpha, l_0)\)</span>.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="set-1.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dbreynol/artifex_fall2022/edit/master/set2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
