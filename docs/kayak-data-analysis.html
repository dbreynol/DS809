<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Kayak Data Analysis | Artifex - Fall 2023</title>
  <meta name="description" content="(Partial) course materials for Artifex, Spring 2023." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Kayak Data Analysis | Artifex - Fall 2023" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="(Partial) course materials for Artifex, Spring 2023." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Kayak Data Analysis | Artifex - Fall 2023" />
  
  <meta name="twitter:description" content="(Partial) course materials for Artifex, Spring 2023." />
  

<meta name="author" content="David Reynolds" />


<meta name="date" content="2023-11-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="linear-regression-revisited.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Artifex Fall 2023</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Topics in Time Series</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#autocorrelation"><i class="fa fa-check"></i><b>1.1</b> Autocorrelation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#assignment-3"><i class="fa fa-check"></i><b>1.2</b> Assignment 3</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#change-points"><i class="fa fa-check"></i><b>1.3</b> Change Points</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#cusum"><i class="fa fa-check"></i><b>1.3.1</b> CUSUM</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#assignment-4"><i class="fa fa-check"></i><b>1.4</b> Assignment 4</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#moving-average"><i class="fa fa-check"></i><b>1.5</b> Moving Average</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#exponential-smoothing"><i class="fa fa-check"></i><b>1.6</b> Exponential Smoothing</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#assignment-5"><i class="fa fa-check"></i><b>1.7</b> Assignment 5</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html"><i class="fa fa-check"></i><b>2</b> Linear Regression Revisited</a>
<ul>
<li class="chapter" data-level="2.1" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html#estimation"><i class="fa fa-check"></i><b>2.1</b> Estimation</a></li>
<li class="chapter" data-level="2.2" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html#example"><i class="fa fa-check"></i><b>2.2</b> Example</a></li>
<li class="chapter" data-level="2.3" data-path="linear-regression-revisited.html"><a href="linear-regression-revisited.html#assignment-2"><i class="fa fa-check"></i><b>2.3</b> Assignment 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="kayak-data-analysis.html"><a href="kayak-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Kayak Data Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="kayak-data-analysis.html"><a href="kayak-data-analysis.html#prompt"><i class="fa fa-check"></i><b>3.1</b> Prompt</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Artifex - Fall 2023</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="kayak-data-analysis" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Kayak Data Analysis<a href="kayak-data-analysis.html#kayak-data-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>We are going to do some analysis on a dataset sent from Kayak. The prompts and data are from their data science recruiting process. To access the data, use the following code:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="kayak-data-analysis.html#cb7-1" aria-hidden="true" tabindex="-1"></a>visits <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/dbreynol/DS809/main/data/visits.csv&quot;</span>)</span>
<span id="cb7-2"><a href="kayak-data-analysis.html#cb7-2" aria-hidden="true" tabindex="-1"></a>conversions <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/dbreynol/DS809/main/data/conversions.csv&quot;</span>)</span>
<span id="cb7-3"><a href="kayak-data-analysis.html#cb7-3" aria-hidden="true" tabindex="-1"></a>channels <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/dbreynol/DS809/main/data/channel_descriptions.csv&quot;</span>)</span></code></pre></div>
<div id="prompt" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Prompt<a href="kayak-data-analysis.html#prompt" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of our team’s goals is to accurately evaluate how successful our marketing campaigns are and to predict how successful future campaigns will be. In this assignment, we want you to explore how to evaluate one notion of success: conversion rate. Depending on the context, a conversion can mean different things, including a flight or hotel booking, a click on a specific part of our site, or an account sign up. Conversion rate in the first case could therefore be defined as completed flight bookings per user visit.
You were given some datasets that contain a sanitized version of some of our logging data. Explore the datasets and work on the questions below. One of the CSVs contains data on daily user visits broken down by user location and marketing channel, and another contains data on conversions also broken down by user location and channel. You also have been given a file with a brief description of the channels.</p>
<ol style="list-style-type: decimal">
<li><p>Do you see any interesting patterns in the data? For example, are there any seasonality trends in user visits or conversion rates (conversions/visits)? Do these seasonality trends differ between countries or channel? Can you think of any potential explanations for any of the patterns/trends/differences you saw?</p></li>
<li><p>Which channels have the best and worst conversion rates? What reasons can you think of to explain the differences? Do you see any major conversion differences for the same channel in different countries?</p></li>
<li><p>Predict next month’s (September 2015) aggregate conversion rates for each channel and country combination? How good are your predictions?</p></li>
</ol>
<p>Last time, we discussed a few ways to estimate the slope coefficient in a linear regression model. This yields a point estimate. The other key ingredient for inference is to determine how much uncertainty there is in our estimate. For the case of <span class="math inline">\(\hat{\beta_1}\)</span>, we want to know how much this estimate varies from sample to sample for the specified sample size. That is, we want to know the variance of the estimate:</p>
<p><span class="math display">\[\begin{align}
Var(\hat{\beta_1}).
\end{align}\]</span></p>
<p>To find what this is, let’s just try to figure out the variance directly, using the analytic formula for <span class="math inline">\(\hat{\beta_1}\)</span> in simple linear regression:</p>
<p><span class="math display">\[\begin{align}
Var \bigg( \frac{\sum_{i=1}^n (x_i - \bar{x})(y_i - \bar{y})}{\sum_{i=1}^n (x_i - \bar{x})^2 }  \bigg).
\end{align}\]</span></p>
<p>To carry out this calculation, recall that <span class="math inline">\(\text{var}(cx) = c^2 \text{var}(x)\)</span>. Also, recall the model assumption of independence across observations. After carrying out this calculation, we can show that,</p>
<p><span class="math display">\[\begin{equation}
Var(\hat{\beta}) = \frac{\hat{\sigma}^2}{(n-1) \hat{var}(x)}
\end{equation}\]</span></p>
<p>How does variation in <span class="math inline">\(\hat{\beta}\)</span> respond to changes in sample size? How about to variation in the predictor?</p>
<p>Before moving on, let’s write some code to make sure our calculations correspond with those generated by <code>lm</code>.</p>
<p>In this case, we are able to obtain not only the variation of the estimate but also the distribution of the estimate as well as the test statistic,</p>
<p><span class="math display">\[\begin{align}
T = \frac{\hat{\beta_1} - \beta}{\sqrt{\text{var}\beta}} \sim t_{n-2}
\end{align}\]</span></p>
<p>This allows us to compute confidence intervals. For instance, if we want to compute a (1-<span class="math inline">\(\alpha\)</span>) confidence interval, note that:</p>
<p><span class="math display">\[\begin{align}
P(t_{\alpha/2} &lt; T &lt; t_{1-\alpha/2}) = (1-\alpha)
\end{align}\]</span></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="linear-regression-revisited.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dbreynol/artifex_fall2022/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
